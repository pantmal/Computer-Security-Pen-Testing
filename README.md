## Open eClass 2.3

Το repository αυτό περιέχει μια __παλιά και μη ασφαλή__ έκδοση του eclass.
Προορίζεται για χρήση στα πλαίσια του μαθήματος
[Προστασία & Ασφάλεια Υπολογιστικών Συστημάτων (ΥΣ13)](https://ys13.chatzi.org/), __μην τη
χρησιμοποιήσετε για κάνενα άλλο σκοπό__.


### Χρήση μέσω docker
```
# create and start (the first run takes time to build the image)
docker-compose up -d

# stop/restart
docker-compose stop
docker-compose start

# stop and remove
docker-compose down -v
```

To site είναι διαθέσιμο στο http://localhost:8001/. Την πρώτη φορά θα πρέπει να τρέξετε τον οδηγό εγκατάστασης.


### Ρυθμίσεις eclass

- Database
  - Host : `db`
  - User : `root`
  - Password : `1234`
- Ρυθμίσεις συστήματος
  - URL του Open eClass : `http://localhost:8001/` (προσοχή στο τελικό `/`)
  - Όνομα Χρήστη του Διαχειριστή : `drunkadmin`


## 2020 Project 1

Εκφώνηση: https://ys13.chatzi.org/assets/projects/project1.pdf


### Μέλη ομάδας

- ΑΜ, όνομα
- 1115201600268, Παντελεήμων Μαλέκας

### Report

Συμπληρώστε εδώ __ένα report__ που
- Να εξηγεί τι είδους αλλαγές κάνατε στον κώδικα για να προστατέψετε το site σας (από την κάθε επίθεση).

### Αλλαγές για προστασία του site

  ### SQL Injection
  Για να προστατέψουμε το site μας από SQL injections, εστιάσαμε στα δυο παραδείγματα που είδαμε στην τάξη. Από τα SQL injections της πρώτης μορφής, δηλαδή τα σημεία όπου μπορεί ένας attacker να προσθέσει SQL κώδικα μέσω user input, δεν καταφέραμε να βρούμε κάποια ευπάθεια. Αυτό οφείλεται στο ότι δεν βρήκαμε πολλά τέτοια σημεία, και όσα βρήκαμε ήταν συνήθως ήδη προστατευμένα. Οπότε, εστιάσαμε στα SQL injections της δεύτερης μορφής, δηλαδή τα σημεία όπου μπορεί κάποιος να προσθέσει SQL κώδικα μέσω παραμέτρων του URL. Εκεί βρήκαμε αρκετές ευπάθειες τις οποίες και διορθώσαμε. Γενικά, οι πιο πολλοί παράμετροι ήταν αριθμητικού τύπου και παρατηρήσαμε μάλιστα ότι σε ορισμένες σελίδες είχαν ήδη προστατευθεί μετατρέποντας το input σε ακέραια μορφή μέσω της συνάρτησης intval. Στα σημεία όπου δεν ίσχυε αυτό, την προσθέσαμε εμείς. Υπήρχαν βέβαια και κάποιες παράμετροι μη-αριθητικές, σε αυτές επιλέξαμε να κάνουμε escape με συναρτήσεις της PHP.

  ### CSRF
  Για τα CSRF εστιάσαμε σε όλες τις φόρμες του site, μιας και όπως είδαμε στο μάθημα τα CSRF εκτελούνται σχεδόν αποκλειστικά μέσα από html forms. Για να εντοπίσουμε τις φόρμες που επηρεάζονταν από την επίθεση αυτή, χρησιμοποιήσαμε κάποια βοηθητικά html αρχεία όπου τοποθετήσαμε τις πιο πολλές φόρμες από το site και εκτελέσαμε την σχετική επίθεση. Γρήγορα συνηδειτοποιήσαμε ότι οι περισσότερες αν όχι όλες οι περισσότερες φόρμες επηρεάζονταν, για αυτό και διορθώσαμε όσες περισσότερες φόρμες βρήκαμε. Ως άμυνα για τα CSRF προσθέσαμε ένα token ως hidden input και υλοποιήσαμε και τους σχετικούς ελέγχους στην PHP. Επίσης όποιος πάει να επιτεθεί σε μια φόρμα μέσω CSRF θα ανακατευθηνθεί αυτόματα στην αρχική σελίδα του site.
  
  ### XSS
  
  
  ### RFI

- Να εξηγεί τι είδους επιθέσεις δοκιμάσατε στο αντίπαλο site και αν αυτές πέτυχαν.
